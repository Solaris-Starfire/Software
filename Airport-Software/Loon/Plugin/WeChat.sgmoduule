#!name = WeChatå¢å¼º
#!desc = DNSåˆ†æµï¼Œå†…ç½®WeChatåˆ†æµï¼Œå¹¿å‘Šè¿‡æ»¤(æ›´æ–°æ—¶é—´2024/10/29)ï¼Œæ–°å¢å¤–éƒ¨é“¾æ¥è§£é”ï¼ˆæ›´æ–°æ—¶é—´2024/11/2ï¼‰
#!æ›´æ–°å†…å®¹ï¼šæ–°å¢å°ç¨‹åºå»å¹¿å‘Šï¼ˆä½œè€…ç½²ååœ¨æ’ä»¶å†…ï¼‰,è¿‡æ»¤å¾®ä¿¡å…¬ä¼—å·å¹¿å‘Š,å¯¹æ”¯ä»˜ç›¸å…³åŸŸåå–ç›´è¿å¤„ç†
#!openUrl = https://apps.apple.com/app/id414478124
#!author = ld2j[https://github.com/LD2J0618],RuCu6[https://github.com/RuCu6],å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md],VirgilClyne,zZPiglet[https://github.com/zZPiglet]
#!icon = https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Weixin.png
#!arguments=Proxy:ä½ çš„ç­–ç•¥ç»„
#!arguments-desc=Proxy:é€‰æ‹©ç­–ç•¥ç»„ï¼Œå°†å¾®ä¿¡&WeChatç›¸å…³åŸŸååˆ†æµï¼Œç›´è¿è¯·è¾“å…¥DIRECTï¼Œä»£ç†è¯·è¾“å…¥ä½ çš„ç­–ç•¥ç»„å \n\nREAD ME:1.æœ¬æ¨¡å—å†…ç½®æœ‰åˆ†æµè§„åˆ™ï¼Œå› æ­¤æ— éœ€å¦å¤–æ·»åŠ åˆ†æµï¼Œå¦‚ä¹‹å‰æœ‰æ·»åŠ è¯·å»é™¤ï¼Œ2.æœ¬æ¨¡å—ä½¿ç”¨éœ€è¦åœ¨ç¼–è¾‘å‚æ•°é‡Œè¾“å…¥ä½ ç°æœ‰ä¸”æƒ³è®©WeChat/å¾®ä¿¡åŸŸåèµ°çš„ç­–ç•¥ç»„å



[host]
# > è…¾è®¯
# refer: https://www.dnspod.cn/products/publicdns
*.tencent.com = server:https://doh.pub/dns-query
# QQ
*.qq.com = server:https://doh.pub/dns-query
# è…¾è®¯å¤´åƒ
*.qlogo.cn = server:https://doh.pub/dns-query
# è…¾è®¯å›¾ç‰‡
*.qpic.cn = server:https://doh.pub/dns-query
# å¾®ä¿¡
*.weixin.qq.com = server:https://doh.pub/dns-query
*.wx.qq.com = server:https://doh.pub/dns-query
*.weixin.com = server:https://doh.pub/dns-query
# å¾®ä¿¡å…¬ä¼—å¹³å°
*.weixinbridge.com = server:https://doh.pub/dns-query
# WeChat
*.wechat.com = server:https://doh.pub/dns-query
# å¾®ä¿¡å°ç¨‹åº
*.servicewechat.com = server:https://doh.pub/dns-query
# è…¾è®¯ å›¾ç‰‡ é™æ€èµ„æº
*.gtimg.cn = server:https://doh.pub/dns-query
*.idqqimg.com = server:https://doh.pub/dns-query
# è…¾è®¯ é™æ€èµ„æº CDN
*.cdn-go.cn = server:https://doh.pub/dns-query
# è…¾è®¯çŸ­ç½‘å€
url.cn = server:https://doh.pub/dns-query

[Rule]
# å¹¿å‘Šè¿‡æ»¤
DOMAIN-SUFFIX, wxs.qq.com, REJECT,extended-matching,pre-matching

# å¾®ä¿¡å°ç¨‹åºé€šç”¨è§„åˆ™
DOMAIN,wxsnsdy.wxs.qq.com,REJECT,extended-matching,pre-matching
DOMAIN,wxsmsdy.video.qq.com,REJECT,extended-matching,pre-matching
DOMAIN,wxsnsdythumb.wxs.qq.com,REJECT,extended-matching,pre-matching


# WeChatpay
DOMAIN-KEYWORD,wechatpay,DIRECT
DOMAIN,epay.ahrcu.com,DIRECT
DOMAIN,mixpay.wechat.com,DIRECT  

# ä½¿ç”¨å‚æ•°ä¸­çš„ Proxy ç­–ç•¥ç»„
DOMAIN,apd-pcdnwxlogin.teg.tencent-cloud.net,{{{Proxy}}}
DOMAIN,btrace.qq.com,{{{Proxy}}}
DOMAIN,dldir1.qq.com,{{{Proxy}}}
DOMAIN,slife.xy-asia.com,{{{Proxy}}}
DOMAIN,soup.v.qq.com,{{{Proxy}}}
DOMAIN,vweixinf.tc.qq.com,{{{Proxy}}}
DOMAIN,weixin110.qq.com,{{{Proxy}}}
DOMAIN,wup.imtt.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,iot-tencent.com,{{{Proxy}}}
DOMAIN-SUFFIX,lbs.gtimg.com,{{{Proxy}}}
DOMAIN-SUFFIX,map.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,qlogo.cn,{{{Proxy}}}
DOMAIN-SUFFIX,qpic.cn,{{{Proxy}}}
DOMAIN-SUFFIX,servicewechat.com,{{{Proxy}}}
DOMAIN-SUFFIX,tenpay.com, {{{Proxy}}}
DOMAIN-SUFFIX,up-hl.3g.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,vweixinthumb.tc.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,wechat.com,{{{Proxy}}}
DOMAIN-SUFFIX,wechatlegal.net,{{{Proxy}}}
DOMAIN-SUFFIX,wechatos.net,{{{Proxy}}}
DOMAIN-SUFFIX,weixin.com,{{{Proxy}}}
DOMAIN-SUFFIX,weixin.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,weixinbridge.com,{{{Proxy}}}
DOMAIN-SUFFIX,weixinsxy.com,{{{Proxy}}}
DOMAIN-SUFFIX,wx.gtimg.com,{{{Proxy}}}
DOMAIN-SUFFIX,wx.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,wxapp.tc.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,wxs.qq.com,{{{Proxy}}}
DOMAIN-SUFFIX,yun-hl.3g.qq.com,{{{Proxy}}}
USER-AGENT,MicroMessenger*,{{{Proxy}}}
USER-AGENT,WeChat*,{{{Proxy}}}
IP-ASN,132203,{{{Proxy}}}, no-resolve

[URL Rewrite]


[Body Rewrite]
http-response-jq ^https:\/\/mcsp\.cloudpnr\.com\/api\/miniapp\/popular\/T_MINIAPP$ 'delpaths([["data"]])'
http-response-jq ^https:\/\/saas-ad\.cloudpnr\.com\/huifuad-base-api\/api\/tactics\/ad$ 'delpaths([["data",0]])'
http-response-jq ^https:\/\/saas-ad\.cloudpnr\.com\/huifuad-base-api\/api\/tactics\/ad$ 'delpaths([["data",1]])'
http-response-jq ^https:\/\/saas-ad\.cloudpnr\.com\/huifuad-base-api\/api\/tactics\/ad$ 'delpaths([["data",2]])'

[Map Local]
# ç§»é™¤å…¬ä¼—å·ä¸­çš„æ¨å¹¿å†…å®¹ //mp.weixin.qq.com
^http:\/\/\w+\.wxs\.qq\.com\/\d+\/\d+\/(snscosdownload|snssvpdownload)\/(SH|SZ)\/reserved\/\w+ data-type=text data="{}" status-code=200
^https:\/\/mp\.weixin\.qq\.com\/mp\/(cps_product_info|getappmsgad|jsmonitor|masonryfeed|relatedarticle)\? data-type=text data="{}" status-code=200

[Script]

#å¾®ä¿¡å¤–éƒ¨é“¾æ¥è§£é” weixin110.qq.com, security.wechat.com
å¾®ä¿¡å¤–éƒ¨é“¾æ¥è§£é” = type=http-response, pattern=^https\:\/\/(weixin110\.qq|security.wechat)\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi\?, script-path=https://kelee.one/Resource/Script/Weixin/Weixin_external_links_unlock.js, requires-body=true

[MITM]
hostname = %APPEND% mp.weixin.qq.com, api.hengdianfilm.com, api.hongyibo.com.cn, api.pinduoduo.com, app.95504.net, capis*.didapinche.com, mobile-api.imlaidian.com, res.hongyibo.com.cn, saas-ad.cloudpnr.com, mcsp.cloudpnr.comï¼Œweixin110.qq.com, security.wechat.com 
